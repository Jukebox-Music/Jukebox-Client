<app-search></app-search>
<div *ngIf="room$ | async; let room; else loading">
    <h1>{{room.name}}</h1>
    <p>Total ravers: {{room.totalUsers}}</p>

    <app-player (event)="playerEvent($event)" #player></app-player>

    <table class="table table-hover">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">Thumbnail</th>
                <th scope="col">Name</th>
                <th scope="col">Time</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let song of room.songs; let i = index" [attr.data-index]="i">
                <th scope="row">{{i + 1}}</th>
                <td><img [src]="song.data.thumbnails.default.url"></td>
                <td>{{song.data.title}}</td>
                <td>{{song.duration | secondToTime}}</td>
            </tr>
        </tbody>
    </table>

    {{room | json}}

    <app-chat></app-chat>

</div>

<ng-template #loading>
    Loading
</ng-template>
